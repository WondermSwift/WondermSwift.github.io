title: PS4手柄键位映射与Unity输入管理器
date: 2015-09-26 01:22:19
categories:  Unity
tags: Unity
description:
---

今天在做PS4手柄控制，百度上居然找不到键位映射，只好自己一个个测出来
<!--more-->

### PS4手柄

PS4的手柄输入分为两种:
> 第一种为`joy stick buttton` x 13 为按键输入(0/1)
  第二种为 `axis` x 9 为 摇杆输入(-1~1) 

按键输入只能取到0和1两个值，摇杆输入获取的是偏移量，成对儿出现，范围从－1到1
部分摇杆同时提供按键输入
 
注意: 左上的方向键为单纯的摇杆输入，不提供数字量

按键映射如下:
![PS4手柄](ps4-joypad.png)

###Unity的输入管理器

Unity的输入管理器是一个很强大的功能，他将各种输入设备的输入统一起来，使得你只要在这里配置好，就可以在代码中获得统一的输入
这里的设置对于移动平台无效
下面挑几个重点参数的说一下功能

| 属性        	   	| 功能    										| 
|------------------	| :-------------------------------------------	|  
| Axes      		| Unity的输入单位为Axes，此处可配置数量size 			|  
| Name      		| Axes的名字作为在代码里检测的唯一标识  				| 
| Negative Button 	| 反向输入，有一个备选按钮Alt Negative Button    	|   
| Positive Button   | 正向输入，有一个备选按钮Alt Positive Buttton      |
| Gravity			| 摇杆归零速度,仅用于键鼠这类虚拟摇杆					|
| Dead				| 阀值，小于该数字的输入会被认为是0					|
| Sensitivity		| 灵敏度，对于按键是响应时间，对于鼠标为移动缩放		|
| Snap				| 取消粘滞，用于键鼠，输入反相时输入变为0				|
| Invert			| 反转输入										|
| Type				| 输入类型，有键鼠、摇杆的轴、鼠标移动					|
| Axis 				| 输入轴,xy为水平竖直,3rd为滚轮或摇杆第三个轴			|
| Joy Num  			| 选用的摇杆轴的编号,一个方向为一个轴,默认接收全部		|

###附加

今天用PS4手柄在Win10上玩进化之地2，没装驱动之前，手柄按键错乱的一塌糊涂 
装了一个驱动后游戏可以完美运行了，但是我切会Unity时，发现早上测的键位全乱了
吓得我赶紧把驱动程序关了，然后就正常了，查了一下，这个该死的驱动程序把PS4的手柄给我映射到xBox上去了






